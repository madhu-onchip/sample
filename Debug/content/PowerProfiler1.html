<!DOCTYPE html />
<html lang="en">
<head>
    <title id='Description'> Power Profiler </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
       
      <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css">   
      <link rel="stylesheet" href="jqwidgets/styles/jqx.base.css" type="text/css" />
	  <link rel="stylesheet" href="jqwidgets/styles/jqx.classic.css" type="text/css" />
     <link rel="stylesheet" href="jqwidgets/styles/jqx.shinyblack.css" type="text/css" />
     <link rel="stylesheet" type="text/css" href="css/home.css" />
      <link rel="stylesheet" type="text/css" href="bootstrap/css/jquery.dataTables.css" />
       <link rel="stylesheet" type="text/css" href="css/jquery.css" />
    <style>


    .jqx-chart-label-text, .jqx-chart-legend-text, .jqx-chart-axis-description, .jqx-chart-title-text, .jqx-chart-title-description        
    {            fill : #ffffff;
                 color: #ffffff;       
    }

    .jqx-chart-axis-text {
       fill: #666666;  
       color: #666666;  
    }
    .jqx-chart-legend-text {
            font-size:18px;
                cursor: pointer;
                 
        }
 .jqx-chart-title-text, .jqx-chart-title-description    {
 
 display:none;

 }

 </style>
    
    <script type="text/javascript" src="scripts/jquery-2.0.2.min.js"></script>
    <script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="js/angular.min.js"></script>
    <script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
     <script type="text/javascript" src="js/jqueryui.js"></script>
    
    <script type="text/javascript" src="jqwidgets/jqxcore.js"></script>
    <script type="text/javascript" src="jqwidgets/jqxdata.js"></script>
     <script type="text/javascript" src="jqwidgets/jqxdata.export.js"></script>
    <script type="text/javascript" src="jqwidgets/jqxdraw.js"></script>
    
    <script type="text/javascript" src="jqwidgets/jqxchart.core.js"></script>
    <script type="text/javascript" src="jqwidgets/jqxchart.api.js"></script>
     <script type="text/javascript" src="jqwidgets/jqxloader.js"></script>
    
    <script type="text/javascript" src="jqwidgets/jqxmenu.js"></script>
   
    <script type="text/javascript" src="jqwidgets/jqxchart.rangeselector.js"></script>
	<script type="text/javascript" src="jqwidgets/jqxchart.jqxrangeselector.js"></script>
    <script src="dispatch.js" type="text/javascript"></script>
    <script src="processoperations.js" type="text/javascript"></script>
    <script src="filepath.js" type="text/javascript"></script> 
    <script src="fileoperations.js" type="text/javascript"></script> 
    <script src="PowerProfiler.js" type="text/javascript"></script> 
    <script src="databind.js" type="text/javascript"></script> 
	 
     <script type="text/javascript">

         var defGraphDepth = 1000;
         var graphDepth = defGraphDepth;
         var maxGraphDepth = 5001;
         var graphPos = 0;

         $(document).ready(function () {
             var indexarray = [];
             var j = 0;

             var totalTime;
             var a1;
             var a2;

             $("#dragg").hide();
             $("#slider").hide();
             //function sr() {
             //    return 'http://www.jqwidgets.com/export_server/export.php';
             //}

             //$("#pngButton").click(function () {
             //    $('#chartContainer').jqxChart('saveAsPDF', 'myChart.pdf', sr());
             //});



             $("#slider").slider({
                 orientation: "horizontal",
                 animate: true,
                 max: 1,
                 min: 0,
                 step: 1,
                 stop: function (event, ui) {
                     try {
                         var min = ui.value;

                         var max = $("#slider").slider("option", "max");

                         if (max > ui.value + graphDepth) {
                             max = ui.value + graphDepth;

                         } else {
                             if (max > graphDepth) {
                                 min = max - graphDepth;

                             } else {
                                 min = 0;
                             }
                         }
                         graphPos = min;
                         //clearGraph();
                        
                         $('#loader').jqxLoader({ isModal: true, text: "loading...", autoOpen: true });
                         $('#loader').jqxLoader('open');
                        
                         displayGraph(min, max, 1, function () {
                             draggUpdate();
                             $('#loader').jqxLoader('close');
                         });
                        
                         //if (toggleSys == 1) {
                         //    $("path[stroke='rgb(215,168, 15)']").css("display", "none");
                         //    toggleSys = 0;
                         //}
                         //if (toggleSys == 0) {
                         //    $("path[stroke='rgb(215,168, 15)']").css("display", "none");
                         //    toggleSys = 1;
                         //}
                     }
                     catch (err) {
                         alert(err);
                     }
                     /*
                     var scrollContent = $("#chartContainer");
                     var scrollPane = $("#chartMain");
                     if (scrollContent.width() > scrollPane.width()) {
                     scrollContent.css("margin-left", Math.round(
                         ui.value / 100 * (scrollPane.width() - scrollContent.width())
                         ) + "px");
                     } else {
                         scrollContent.css("margin-left", 0);
                     }
                     */
                     // alert(ui.value);
                 }
             });


             // prepare the data 
             $(".dropdown").on("mouseenter", function () {
                 var scope = angular.element($("#mainMenu")).scope();
                 scope.$apply();
             });

             //$("#resizable1").resizable({
             //    handles: "e,w", containment: "parent",

             //}).draggable({ axis: "x", scroll: true, containment: "#svgChart" });
           
             $("#arrow1").draggable({
                 axis: "x", handle: "img", containment: "#chartContainer",
                 drag: function () {
                     var maxDrag = Math.max.apply(Math, indexarray.map(function (val) { return val.x }));
                     var $this = $(this);
                     var thisPos = $this.position();
                     a1 = thisPos.left;
                     
                     $("#arrow1").draggable("option", "containment", [30, 0, maxDrag - 15, 0]);
                     if (maxDrag-15>a1) {
                         if (a2 <= a1) {
                            // $("#arrow1").draggable("option", "containment", [10, 0, a2-10, 0]);
                         $("#arrow2").css({ left: a1 + 10 });

                         }

                 }
               },
                 stop: function () {
                      //alert("stop");
                     draggUpdate();
                 }
              });
             $("#arrow2").draggable({
                 axis: "x", handle: "img", containment: "#chartContainer",
                 drag: function () {
                     var maxDrag = Math.max.apply(Math, indexarray.map(function (val) { return val.x }));
                     var $this = $(this);
                     var thisPos = $this.position();
                     a2 = thisPos.left;
                     //var y =1350-a1;
                     // var wid = $("#chartContainer").width();
                     if (a1>= a2) {
                         //alert(a2);
                        // $("#arrow2").draggable("option", "containment", [a1+20, 0, maxDrag + 15, 0]);
                        $("#arrow1").css({ left: a2 - 20 });

                     }
                     else {
                         //$("#span2").text(wid);
                         $("#arrow2").draggable("option", "containment", [30, 0, maxDrag + 15, 0]);
                     }
                 },
                 stop: function () {
                     // alert("stop");
                    
                     draggUpdate();
                    
                 }
             });
             // alert(JSON.stringify(l));   				
             //$("#arrow1").mousemove(function(data){
             //	   l=$("#arrow1").css("left");
             //$(".ui-resizable-resizing").css("left",l);
             //	$("#resizable1").css("left",l);
             //});

             //$("#arrow2").mousemove(function(data){
             //	   l=$("#arrow2").css("left");
             //$(".ui-resizable-resizing").css("left",l);
             //	$("#resizable1").css("left",l);
             //});	
             //$("#resizable1").css("left",l);
             //$("#arrow1").on('drag',function(data){
             //     $("#arrow1").css("left");

             //	  					//  $("#span").text(l);

             //});

             //$("#arrow2").on('drag',function(data){
             //      $("#arrow2").css("left");
             //	 // $("#span1").text(l);
             //});		

             initChart();

             $(".jqx-chart-axis-description ").css("display", "none");
             $(".jqx-chart-title-text").css("display", "none");
             $(".jqx-chart-title-description").css("display", "none");

             function getClosestLeft(clientX) {
                 var x1 = null;
                 var dumy = null;
                 var objR = null;
                 var objL = null;
                var p = indexarray[1].time - indexarray[0].time;
                 //alert(difPix);
                // $('#span1').text(JSON.stringify(indexarray));
                 // Search for closest left side x-axis graph element.
                 indexarray.map(function (obj) {
                     //if (obj.x == clientX) {

                     //    //if (x1 == null) {
                     //    //    x1 = obj.time;
                     //    //     return x1;
                     //    //}
                     //   } else {
                     if (obj.x >= clientX) {
                             var m = parseFloat(obj.time);
                             var l = parseFloat(obj.time) - parseFloat(indexarray[1].time - indexarray[0].time);
                            
                             if (dumy == null) {
                                 dumy = obj;
                                
                                 indexarray.map(function (obj) {
                                   
                                      if (obj.time == m) {
                                         if (objR == null) {
                                             objR = obj.x;
                                            // alert(objR + "..2 pixel val");
                                         }
                                     }
                                      if (obj.time == l) {
                                          if (objL == null)
                                              objL = obj.x;
                                               
                                          //alert(objL + "..1 pixel val");
                                          
                                      }

                                 });
                                 
                                 if (obj.x >= clientX && clientX <=objR )
                                 {
                                    // alert(clientX + "..marker val");
                                     var Period = p * 1000;
                                     //alert(Period + "..Period");
                                     var distancebtPix = (objR - objL);
                                    // alert(distancebtPix+"..distance period");
                                     var scale = Period / (objR - objL);
                                    // alert(scale+"..scale");
                                     var distancePixel = clientX - objL;
                                    // alert(distancePixel+"..disPix");
                                     var distaneTime = scale * distancePixel;
                                    // alert(distaneTime + "..distTime");
                                     var mtime = l + distaneTime/1000;
                                   // alert(l);
                                   //  alert(mtime+"..markerTime");
                                     //deltaPix = deltaPix / 2;
                                     //var pass={
                                     //    k:parseFloat(objL) + parseFloat(deltaPix),
                                     //  j : (l+m)/2
                                     //};
                                     x1 = mtime.toFixed(3);
                                   
                                 }
                                
                            }
                         }
                     }
                 );
                return x1;
             }

             function getClosestRight(clientX) {
                 //var x2 = null;
                 //// Search for closest left side x-axis graph element.
                 //indexarray.map(function (obj) {
                 //    if (obj.x >= clientX) {
                 //        //alert(JSON.stringify(obj));
                 //        if (x2 == null) {
                 //            x2 = obj;
                 //        }

                 //        //else if (obj.time < x2.time) {
                 //        //    x2 = obj;
                 //        //   // alert(JSON.stringify(obj));
                 //        //}
                 //    } else { return; }
                 //});
                 //return x2;
                 //}
                 var x2 = null;
                 var dumy = null;
                 var objR = null;
                 var objL = null;
                 var p = indexarray[1].time - indexarray[0].time;
                 //alert(difPix);
                 // $('#span1').text(JSON.stringify(indexarray));
                 // Search for closest left side x-axis graph element.
                 indexarray.map(function (obj) {
                     //if (obj.x == clientX) {

                     //    //if (x1 == null) {
                     //    //    x1 = obj.time;
                     //    //     return x1;
                     //    //}
                     //   } else {
                     if (obj.x >= clientX) {
                         var m = parseFloat(obj.time);
                         var l = parseFloat(obj.time) - parseFloat(indexarray[1].time - indexarray[0].time);

                         if (dumy == null) {
                             dumy = obj;

                             indexarray.map(function (obj) {

                                 if (obj.time == m) {
                                     if (objR == null) {
                                         objR = obj.x;
                                        // alert(objR + "..2 pixel val");
                                     }
                                 }
                                 if (obj.time == l) {
                                     if (objL == null)
                                         objL = obj.x;

                                    // alert(objL + "..1 pixel val");

                                 }

                             });

                             if (obj.x >= clientX && clientX <= objR) {
                                // alert(clientX + "..marker val");
                                 var Period = p * 1000;
                                 //alert(Period + "..Period");
                                 var distancebtPix = (objR - objL);
                                // alert(distancebtPix + "..distance period");
                                 var scale = Period / (objR - objL);
                                // alert(scale + "..scale");
                                 var distancePixel = clientX - objL;
                                // alert(distancePixel + "..disPix");
                                 var distaneTime = scale * distancePixel;
                                // alert(distaneTime + "..distTime");
                                 var mtime = l + distaneTime / 1000;
                                // alert(l);
                                // alert(mtime + "..markerTime");
                                 //deltaPix = deltaPix / 2;
                                 //var pass={
                                 //    k:parseFloat(objL) + parseFloat(deltaPix),
                                 //  j : (l+m)/2
                                 //};
                                 x2 = mtime.toFixed(3);

                             }

                         }
                     }
                 }
                 );
                 return x2;
             }

             function getBounds() {
                 var i1 = $("#img1");
                 var i2 = $("#img2");
                 var left = Math.floor($(i1).offset().left - 22.5);
                 var right = Math.floor($(i2).offset().left - 22.5);

                 // var el = $("#resizable1");
                 // var left = Math.floor($(el).offset().left);
                 // var right = Math.floor(left + $(el).width());

                 var bounds = {
                     left: left,
                     right: right,
                     x1: getClosestLeft(left),
                     x2: getClosestRight(right)
                 };

                 return bounds;
             }

             var resizeTimer = null;

             //  $("#img1,#img2").mouseup(function (e) {
             //alert("mouseup");

             function draggUpdate() {

                 data();
                // $("#span").text(JSON.stringify(chartData));
                 totalTime = Math.max.apply(Math, indexarray.map(function (val) { return val.time; }));

                 // $("#span").text(JSON.stringify(indexarray[0].time));
                 //$("#span").text(JSON.stringify(indexarray[1].time));
                 //$("#span1").text(indexarray[0].time);
               
                 $("#prdSec").text((indexarray[1].time - indexarray[0].time).toFixed(3) + ' sec');

                 $("#durSec").text(totalTime + ' sec');
                 if (resizeTimer != null) {
                     clearTimeout(resizeTimer);
                 }
                 var bounds = getBounds();
                 //$("#span1").text(JSON.stringify(bounds.x1));
                 var m1 = bounds.x1;
                 var m2 = bounds.x2;
                 var m3 = m2 - m1;
                 $("#deltaT").text(m3.toFixed(3).toString() + "sec");
                 $("#Marker1").text(Math.abs(m1.toString()) + "sec");
                 $("#Marker2").text(Math.abs(m2.toString())+ "sec");



                 var a = [i];
                 var b = [i];
                 var c = [i];
                 var d = [i];
                 var i = 0;
                 var values = chartData;
                 var min = bounds.x1*1000;
                 var max = bounds.x2*1000;
                 jQuery.map(values, function (obj) {
                     if (obj.time >= min && obj.time <= max) {

                         //$("#span1").text(JSON.stringify(temporaryArray));
                         a[i] = obj.value1;
                         b[i] = obj.value2;
                         c[i] = obj.value3;
                         d[i] = obj.value4;
                         i++;
                     }
                 });


                 // var totalTime = Math.max.apply(Math, anotherArray.map(function (val) { return val.time; }));
                 // alert(totalTime);
                 var wifi = 0;
                 for (var j = 0; j < a.length; j++) {
                     wifi += a[j] << 0;

                 }
                 var sys = 0;
                 for (var j = 0; j < c.length; j++) {
                     sys += c[j] << 0;

                 }
                 var wyz = 0;
                 for (var j = 0; j < b.length; j++) {
                     wyz += b[j] << 0;

                 }
                 var mcu = 0;
                 for (var j = 0; j < d.length; j++) {
                     mcu += d[j] << 0;
                 }
                 // average current values
                 wifi = wifi / a.length;
                 sys = sys / c.length;
                 wyz = wyz / b.length;
                 mcu = mcu / d.length;
                 $("#wireAvg").text(wifi.toFixed(2) + 'mA');
                 $("#modAvg").text(sys.toFixed(2) + 'mA');
                 $("#wyzAvg").text(wyz.toFixed(2) + 'mA');
                 $("#mcuAvg").text(mcu.toFixed(2) + 'mA');

                 // max and min values

                 var wifimax = Math.max.apply(Math, a.map(function (val) { return val; }));
                 var wifimin = Math.min.apply(Math, a.map(function (val) { return val; }));

                 var mcumax = Math.max.apply(Math, d.map(function (val) { return val; }));
                 var mcumin = Math.min.apply(Math, d.map(function (val) { return val; }));

                 var wyzmax = Math.max.apply(Math, b.map(function (val) { return val; }));
                 var wyzmin = Math.min.apply(Math, b.map(function (val) { return val; }));

                 var modmax = Math.max.apply(Math, c.map(function (val) { return val; }));
                 var modmin = Math.min.apply(Math, c.map(function (val) { return val; }));

                 $("#wireMax").text(wifimax + 'mA');
                 $("#wireMin").text(wifimin + 'mA');

                 $("#mcuMax").text(mcumax + 'mA');
                 $("#mcuMin").text(mcumin + 'mA');

                 $("#modMax").text(modmax + 'mA');
                 $("#modMin").text(modmin + 'mA');

                 $("#wyzMax").text(wyzmax + 'mA');
                 $("#wyzMin").text(wyzmin + 'mA');

                 // charge
                 var wifiCharge = wifi * a.length / 3600;
                 var sysCharge = sys * c.length / 3600;
                 var mcuCharge = mcu * d.length / 3600;
                 var wyzCharge = wyz * b.length / 3600;

                 $("#wirechg").text(wifiCharge.toFixed(3) + 'mAh');
                 $("#mcuchg").text(mcuCharge.toFixed(3) + 'mAh');
                 $("#syschg").text(sysCharge.toFixed(3) + 'mAh');
                 $("#wyzchg").text(wyzCharge.toFixed(3) + 'mAh');

                 // power

                 var wifiPow = wifi * wifi * 0.05 / 1000;
                 var sysPow = sys * sys * 0.05 / 1000;
                 var mcuPow = mcu * mcu * 0.05 / 1000;
                 var wyzPow = wyz * wyz * 0.05 / 1000;

                 $("#wirePow").text(wifiPow.toFixed(2) + 'mW');
                 $("#modPow").text(sysPow.toFixed(2) + 'mW');
                 $("#mcPow").text(mcuPow.toFixed(2) + 'mW');
                 $("#wyPow").text(wyzPow.toFixed(2) + 'mW');

             }

             //  });


             function data() {
                 indexarray = [];
                 var temp = [];
                 var element = $("svg g");
                 $(element).find(".jqx-chart-axis-text").each(function (index) {
                     var obj = {};
                     obj.x = $(this).attr("x");
                     obj.y = $(this).attr("y");
                     obj.time = $(this).text();
                     temp.push(obj);
                     // $("#span").text(JSON.stringify(temp));

                 });

                 var maxy = null;
                 var miny = null;
                 temp.some(function (obj) {
                     if (maxy == null) {
                         maxy = obj.y;
                         // alert('1' + maxy);
                     }
                     if (miny == null) {
                         miny = obj.y;
                         // alert('2' + miny);
                     }
                     if (obj.y > maxy) {
                         maxy = obj.y;
                         // alert('3' + maxy);
                     }
                     if (obj.y < miny) {
                         miny = obj.y;
                         // alert('4' + miny);
                     }
                     if (maxy > miny) {
                         return true;
                     }
                     return false;
                 });
                 jQuery.map(temp, function (obj) {
                     if (miny < obj.y && maxy == obj.y) {
                         indexarray.push(obj);
                         // $("#span").text(JSON.stringify(indexarray));

                     }
                 });
                 //indexarray.pop();


             }

             $("#zoomIn").on('click', function (e) {
                
                 e.preventDefault();
                 var max = $("#slider").slider("option", "max");
                 if (graphDepth < 700) {
                     graphDepth = 500;

                 } else {
                     graphDepth -= 500;
                 }
                 $('#loader').jqxLoader({ isModal: true, text: "loading...", autoOpen: true });
                 $('#loader').jqxLoader('open');
                 displayGraph(graphPos, graphPos + graphDepth, 1, function () {
                     draggUpdate();

                     var zoomMaxValue = 0;
                     var zoomMinValue = 0;

                     zoomMaxValue = Math.max.apply(Math, indexarray.map(function (val) { return val.time; }));
                     zoomMinValue = Math.min.apply(Math, indexarray.map(function (val) { return val.time; }));
                     // zoomMaxValue -= 500;
                     var zoomDiff = zoomMaxValue - zoomMinValue;
                     //$("#span1").text(zoomDiff);
                     //$("#span1").text(zoomDiff);
                     var diffZoom = (zoomDiff * 1000);
                     var zoomPersent = ((5000 / diffZoom) * 100);

                     if (zoomPersent < 1000) {
                         $("#zoomRes").text(Math.ceil(zoomPersent) + "%");
                     }
                    
                 else {
                         $("#zoomRes").text(1000 + "%");
                 }
                     $('#loader').jqxLoader('close');

                 });

                
                 /*
                 var w = $("#chartContainer").width();
                 if (j == 0) {
                     originalWidth = w;
                     j++;
                 }
                 var ow = w + 100;
                 if (ow > 4096) {
                     //alert("its the maximum value");
                 } else {
                     $("#chartContainer").width(ow);
                     $("#svgChart").width(ow);
                     $("#chartContainer").jqxChart('refresh');
                     data();
                     $("#prdSec").text(indexarray[1].time + " ms");
                 }
                 */
             });

             $("#zoomOut").on('click', function (e) {
                 
                 e.preventDefault();
                 var max = $("#slider").slider("option", "max");
                 graphDepth += 500;
                 if (graphDepth > maxGraphDepth) {
                     graphDepth = maxGraphDepth;
                 }
                 if (graphDepth > max) {
                     graphDepth = max;
                 }
                 $('#loader').jqxLoader({ isModal: true, text: "loading...", autoOpen: true });
                 $('#loader').jqxLoader('open');
                 displayGraph(graphPos, graphPos + graphDepth, 1, function () {
                     draggUpdate();

                     var zoomMaxValue = 0;
                     var zoomMinValue = 0;

                     zoomMaxValue = Math.max.apply(Math, indexarray.map(function (val) { return val.time; }));
                     zoomMinValue = Math.min.apply(Math, indexarray.map(function (val) { return val.time; }));
                     //  zoomMaxValue += 500;
                     var zoomDiff = zoomMaxValue - zoomMinValue;
                     //$("#span2").text(zoomDiff);
                     //$("#span2").text(zoomDiff);
                     var diffZoom = (zoomDiff * 1000);
                     var zoomPersent = ((5000 / diffZoom) * 100);

                     if (zoomPersent < 1000) {
                         $("#zoomRes").text(Math.ceil(zoomPersent) + "%");
                     }
                    
                     $('#loader').jqxLoader('close');
                 });


                
                 //} else {
                  //   $("#zoomRes").text(200 + "%");
                 //}
                 /*
                 var w = $("#chartContainer").width();
                 var ow = w - 100;
                 if (originalWidth < w) {

                     $("#chartContainer").width(ow);
                     $("#svgChart").width(ow);
                     $("#chartContainer").jqxChart('refresh');

                     data();
                     $("#prdSec").text(indexarray[1].time + " ms");
                 }
                 else {
                     //alert("its the minmum zoom");
                 }
                 */
             });


             $("#ch3").on('click',
                 function () {
                    // event.preventDefault();
                     //  $('#chartContainer').jqxChart('hideSerie', 0, 0);
                     if ($(this).prop("checked") == false) {
                         $('#chartContainer').jqxChart('hideSerie', 0, 1);
                         //$("path[stroke='rgb(66,100,159)']").css("display", "none");
                         $("#wyzTr").hide();
                        // $('#ch3').prop('checked', false);
                        // toggleMod = 0;
                     }
                     if ($(this).prop("checked") == true) {
                         $('#chartContainer').jqxChart('showSerie', 0, 1);
                        // $("path[stroke='rgb(66,100,159)']").css("display", "inline");
                       //  $('#ch3').prop('checked', true);
                         $("#wyzTr").show();
                        // toggleMod = 1;
                     }
                 });
             $("#ch2").on('click',
              function () {
                 // event.preventDefault();
                  if ($(this).prop("checked") == false) {
                      $('#chartContainer').jqxChart('hideSerie', 0, 3);
                    //  $("path[stroke='rgb(57,142,35)']").css("display", "none");
                      $("#mcuTr").hide();
                      //$('#ch2').prop('checked', false);
                     // toggleMcu = 0;
                  }
                  if ($(this).prop("checked") == true) {
                      $('#chartContainer').jqxChart('showSerie', 0, 3);
                     // $("path[stroke='rgb(57,142,35)']").css("display", "inline");
                      $("#mcuTr").show();
                     // $('#ch2').prop('checked', true);
                     // toggleMcu = 1;
                  }
              });
             $("#ch4").on('click',
              function () {
                  //event.preventDefault();
                  if ($(this).prop("checked") == false) {
                      $('#chartContainer').jqxChart('hideSerie', 0, 2);
                     // $("path[stroke='rgb(215,168, 15)']").css("display", "none");
                      $("#modTr").hide();
                     // $('#ch4').prop('checked', false);
                     // toggleSys = 0;
                  }
                  if ($(this).prop("checked") == true) {
                      $('#chartContainer').jqxChart('showSerie', 0, 2);
                     // $("path[stroke='rgb(215,168, 15)']").css("display", "inline");
                      $("#modTr").show();
                    //  $('#ch4').prop('checked', true);
                    //  toggleSys = 1;
                  }
              });
             $("#ch1").on('click',
              function () {
                 
                  if ($(this).prop("checked") == false) {
                      $('#chartContainer').jqxChart('hideSerie', 0, 0);
                     // $("path[stroke='rgb(189,40,120)']").css("display", "none");
                     // $('#ch1').prop('checked', false);
                      $("#wifiTr").hide();
                      //toggleWifi = 0;
                  }
                  if ($(this).prop("checked") == true) {
                      $('#chartContainer').jqxChart('showSerie', 0, 0);
                      //$("path[stroke='rgb(189,40,120)']").css("display", "inline");
                      //$('#ch1').prop('checked', true);
                      $("#wifiTr").show();
                     // toggleWifi = 1;
                  }
              });
             //$("#pdf").on("click", function () {
             //    // alert("h");
             //    $('#chartContainer').jqxChart('saveAsPDF', 'file.pdf');

             //}
             //);
             var toggleMod = 1;
             var toggleWifi = 1;
             var toggleSys = 1;
             var toggleMcu = 1;


         });
    </script>
</head>
<body ng-app="powerProfiler">
    <div class="page"  id="mainMenu" ng-controller="menuCtrlr">
		<div class="menu">
			<ul class="nav navbar-nav navmenu pull-left">
				<li class="dropdown">
					<button class="btn btn-sm" type="button" data-toggle="dropdown" data-target="File_Menu"><strong>FILE</strong></button>
					<ul class="dropdown-menu" id="File_Menu">
						<li ng-class="{'disabled': data.capture}" ng-click="open()"><a href="#"> <span class="glyphicon glyphicon-folder-open pull-right"></span><strong>Open</strong></a></li>
						<li ng-class="{'disabled': data.close}" ng-click="close()"><a href="#"> <span class="glyphicon glyphicon-folder-close pull-right"></span><strong>Close</strong></a></li>
						<li ng-class="{'disabled': !data.enableSave}" ng-click="save()"><a href="#"><span class="glyphicon glyphicon-floppy-disk pull-right"></span><strong>Save</strong></a></li>
                       
						<li ng-click="exit()"><a href="#"><span class="glyphicon glyphicon-off pull-right"></span><strong>Exit</strong></a></li>
					</ul>
				</li>
				<li class="dropdown">
					<button class="btn btn-sm" type="button" data-toggle="dropdown" data-target="Target_Menu"><strong>TARGET</strong></button>
					<ul class="dropdown-menu" id="Target_Menu">
						<li ng-class="{'disabled': data.capture}" ng-click="start()"><a href="#"> <span class="glyphicon glyphicon-play pull-right"></span><strong>Start</strong></a></li>
						<li ng-class="{'disabled': !data.capture}" ng-click="stop()"><a href="#"> <span class="glyphicon glyphicon-stop pull-right"></span><strong>Stop</strong></a></li>
					</ul>
				</li>
				<li class="dropdown" ng-hide="true">
					<button class="btn btn-sm" type="button" data-toggle="dropdown" data-target="Source_Menu"><strong>SOURCE</strong></button>
					<ul class="dropdown-menu" style="width:200px !important;" id="Source_Menu">
						<li ng-class="{'disabled': data.capture}" ng-click="toggleSource('mcu')"><a href="#"><span ng-show="data.mcu" class="glyphicon glyphicon-ok pull-right"></span><strong>MCU Current</strong></a></li>
						<li ng-class="{'disabled': data.capture}" ng-click="toggleSource('wyzbee')"><a href="#"><span ng-show="data.wyzbee" class="glyphicon glyphicon-ok pull-right"></span><strong>WyzBee Current</strong></a></li>
						<li ng-class="{'disabled': data.capture}" ng-click="toggleSource('wifi')"><a href="#"><span ng-show="data.wifi" class="glyphicon glyphicon-ok pull-right"></span><strong>WiFi Current</strong></a></li>
						<li ng-class="{'disabled': data.capture}" ng-click="toggleSource('system')"><a href="#"><span ng-show="data.system" class="glyphicon glyphicon-ok pull-right"></span><strong>System Current</strong></a></li>
					</ul>
				</li>

				<li style="display:inline-block; margin-left:20px;">
					<button id="btnStart" class="btn btn-sm btn-default" type="button"  ng-class="{'disabled': data.capture}" ng-click="start()">
						<span class="glyphicon glyphicon-play" ng-class="{'disabled': data.capture}"></span>
					</button>
					<button id="btnStop" class="btn btn-sm btn-default" type="button" ng-class="{'disabled': !data.capture}" ng-click="stop()">
						<span ng-class="{'disabled': !data.enableSave}" class="glyphicon glyphicon-stop" ng-class="{'disabled': !data.capture}"></span>
					</button>
					<button id="btnSave" class="btn btn-sm btn-default" type="button" ng-class="{'disabled': !data.enableSave}" ng-click="save()">
						<span ng-class="{'disabled': !data.enableSave}" class="glyphicon glyphicon-floppy-disk"></span>
					</button>
				</li>
               
			<!--	<li style="display:inline-block; margin-left:20px;" class="btn-group" data-toggle="buttons">
					<label id="timeSec" class="btn btn-sm btn-default" ng-class="{'active':data.timeInSec, 'disabled':data.capture}" ng-click="toggleTime('sec')">
						<input type="radio" id="q156" name="time" ng-model="data.timeInSec" ng-value="true" /> secs
					</label>
					<label id="timeMilli" class="btn btn-sm btn-default" ng-class="{'active': !data.timeInSec, 'disabled':data.capture}" ng-click="toggleTime('milli')">
						<input type="radio" id="q157" name="time" ng-model="data.timeInSec" ng-value="false" /> milli
					</label>
				</li>
				<li style="display:inline-block; margin-left:20px;" class="btn-group" data-toggle="buttons">
				  <button id="btnPauseResume" value="Pause" style="position:absolute; display:inline-block;"><strong>Pause</strong></button>

				  
					   
				</li> -->
			  </ul>
		 </div>   <!--menu-->
        <div id="chartMain">
		<div id='yAxisUnits' style="position:absolute; width:20px;
                          height:100% !important; z-index:0;background-color:black;">
			 <span style="rotate:(-90deg);background-color:black; display:inline-block;overflow: hidden;display: inline-block;
           white-space: nowrap; transform: translate(1.1em,0) rotate(90deg); transform-origin: 0 0; left:5px;
    margin-top:90px;"> Current in mA</span>
			</div>
            <div id='chartContainer' class="chartanddragg">
            </div>
			
			<div id='xAxisUnits' style="position:absolute; width:100%; height:12px; bottom:0;">
			 <span style="margin-left:49%;font-size:12px;"> Time in Sec</span>
			</div>
           <div id="resizable1">
		     <span id="span"></span>
              <span id="span1"></span>
               <span id="span2" style="background-color:green;"></span>
               <span id="span3" style="background-color:blue;"></span>
		    </div> 
           <div id="dragg" class="chartanddragg">
		     <div id="arrow1" style="display:inline-block;z-index:3 !important;">
				<img  id="img1" style="cursor:pointer"; src="arrow1.png"; height="30"; width="20";/>
				<div  class="arrowDiv">
				</div>
			 </div>
			 <div   id="arrow2" style="display:inline-block; cursor:none;z-index:3 !important;">
			  <img  id="img2"  style="cursor:pointer;"src="arrow2.png"; height="30"; width="20";/>
			    <div  class="arrowDiv">
				</div>
			  </div>
         </div>		   
        </div>
		<div id=slider>
		</div>
  	    <div id=markers>
		  <div>
		    <button id="status" class="pull-left">Stopped</button>
                 <span style="width:20px; height:20px;text-align:center;color:white;opacity:0.5;font-size:14px;margin:8px 0px 0px 50px;">
                     Marker 1:
                 </span>
               <span id="Marker1" style="border: 1px solid #aaa; width:15px;height:5px;font-size:12px; color:#fff;opacity:0.5;">0sec</span>
            <!-- <button style=" height:20px; margin-left:180px;  color:#fff; font-size:11px;background-color:rgb(98,98,98); border:none;"> 
                   Measurements between markers</button>-->
              <span  style="width:20px;height:20px;text-align:center;color:white;opacity:0.5;font-size:14px;margin:8px 0px 0px 50px;">
                     Marker 2:
                 </span>
               <span id="Marker2" style="border: 1px solid #aaa; width:15px;height:5px;font-size:12px; color:#fff;opacity:0.5;">0sec</span>
              <span style="width:20px;height:20px;text-align:center;left:10px;color:white;opacity:0.5;font-size:14px;margin:8px 0px 0px 15px;">Delta T:</span>
              <span id="deltaT" style="border: 1px solid #aaa; width:15px;height:5px;font-size:12px; color:#fff;opacity:0.5;">0sec</span>
                <span  id="zoomRes" class="pull-right" style="border: 1px solid #aaa; height: 20px !important; width:40px; margin: 3px;font-size:12px; color:#fff;opacity:0.5;">200%</span>
              <span  class="pull-right" style="width:40px;height:20px;text-align:center;color:white;opacity:0.5;font-size:14px;margin:4px;">Zoom:</span>
             
			<button id="zoomOut" class="pull-right  glyphicon glyphicon-zoom-out " style="display:none;cursor:zoom-out;"></button>
			<button  id="zoomIn" class="pull-right glyphicon glyphicon-zoom-in"  style="display:none;cursor:zoom-in;"></button></div>
		     
		  <div id="markersinside">
			<table id="markerstable" class="table">
				<thead>
					<tr>
						<th>Min Current</th>
						<th>Avg Current</th>
						<th>Max Current</th>
						<th>Avg Power</th>
						<th>Charge / Energy</th>
					</tr>
				</thead>
				<tbody>
				 <tr id="wyzTr" >
					<td class="wyz"  id="wyzMin"></td>
					<td class="wyz" id="wyzAvg"></td>
					<td  class="wyz" id="wyzMax"></td>
					<td class="wyz" id="wyPow"></td>
					<td  class="wyz" id="wyzchg"></td>
				  </tr >
                    <tr id="modTr">
					<td  class="sys"  id="modMin"></td>
					<td  class="sys" id="modAvg"></td>
					<td  class="sys"  id="modMax"></td>
					<td  class="sys"  id="modPow"></td>
					<td  class="sys"  id="syschg"></td>
				 </tr>	
                  <tr id="mcuTr">
					<td  class="mcu" id="mcuMin"></td>
					<td  class="mcu" id="mcuAvg"></td>
					<td   class="mcu" id="mcuMax"></td>
					<td   class="mcu"  id="mcPow"></td>
					<td   class="mcu" id="mcuchg"></td>
				 </tr>			
                  	
                  <tr id="wifiTr">
					<td  class="wifi" id="wireMin"></td>
					<td  class="wifi" id="wireAvg"></td>
					<td   class="wifi" id="wireMax"></td>
					<td   class="wifi" id="wirePow"></td>
					<td   class="wifi" id="wirechg"></td>
				 </tr>						 
				</tbody>
			</table>	
		  </div>
		<div id="markersbottom">
		    <span style="font-size:12px;">Duration:</span><span id="durSec" style="border:1px solid #aaa; font-size:11px;">0sec</span>
		    <span style="font-size:12px;">Period:</span><span id="prdSec" style="border:1px solid #aaa; font-size:11px;">0sec</span>
			<span style="font-size:12px;">Total duration:</span><span id="totalDur" style="border:1px solid #aaa; font-size:11px;">0sec</span>
			
		</div>		  
		</div>
		  
		   <div  style=" width:100%; background-color:rgb(43,43,43); height:40px; position:fixed ! important;">
		     <label class="checkbox-inline" style="left:25%">
                   <input id="ch3" type="checkbox" checked="checked" "/>
			  <input type="button" value="Wyzbee" class="showlegends" id="wMod"  style="background-color:rgb(66,100,159);"/>
			 </label>
			<label class="checkbox-inline" style="left:25%" >
                   <input id="ch4" type="checkbox" checked="checked" />
			  <input type="button"  value="Module" class="showlegends" id="sysPow"  style="background-color:rgb(215,168,15);"/>
			</label>
                <label class="checkbox-inline"style="left:25%">
                    <input id="ch2" type="checkbox" checked="checked" /> 	
			        <input type="button" id="mcuPow" class="showlegends"  value="MCU" style="background-color:rgb(57,142,35); "/>
			 </label>
                <label class="checkbox-inline" style="left:25%">
                   <input id="ch1" type="checkbox" checked="checked"  />
                   <input type="button" id="wifiPow" class="showlegends"  value="Wireless" style="background-color:rgb(189,40,120); cursor:none; border:none; "/>
			</label>
                
		 </div>
       </div>
       <div id="loader"  style="width:100px;height:100px;"> </div>
</body>
</html>
